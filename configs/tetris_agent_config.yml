# SPDX-FileCopyrightText: Copyright (c) 2024-2025, NVIDIA CORPORATION & AFFILIATES. All rights reserved.
# SPDX-License-Identifier: Apache-2.0

# ä¿„ç½—æ–¯æ–¹å—åˆ†æç³»ç»Ÿé…ç½®

general:
  use_uvloop: true
  log_level: "INFO"

functions:
  # ä¿„ç½—æ–¯æ–¹å—è§†è§‰åˆ†æå·¥å…·
  tetris_vision_analysis:
    _type: image_description 
    llm_name: "multimodal_llm"
    description: "åˆ†æä¿„ç½—æ–¯æ–¹å—æ¸¸æˆæˆªå›¾å¹¶æå–æ¸¸æˆçŠ¶æ€ä¿¡æ¯"
    supported_formats: ["jpg", "jpeg", "png", "webp"]

  # ä¿„ç½—æ–¯æ–¹å—ç­–ç•¥åˆ†æå·¥å…·
  tetris_strategy_analysis:
    _type: tetris_strategy_analysis
    llm_name: "strategy_llm"
    description: "åŸºäºæ¸¸æˆçŠ¶æ€æä¾›ä¿„ç½—æ–¯æ–¹å—ç­–ç•¥å»ºè®®"

llms:
  # å¤šæ¨¡æ€æ¨¡å‹é…ç½® - ç”¨äºå›¾åƒåˆ†æ
  multimodal_llm:
    _type: openai
    model_name: "qwen-vl-max"
    api_key: "sk-xxxx"
    base_url: "https://dashscope.aliyuncs.com/compatible-mode/v1"
    temperature: 0.3
    max_tokens: 1024
    timeout: 60

  # ç­–ç•¥åˆ†ææ¨¡å‹ - ç”¨äºæ¸¸æˆç­–ç•¥
  strategy_llm:
    _type: openai
    model_name: "qwen-max"
    api_key: "sk-xxx"
    base_url: "https://dashscope.aliyuncs.com/compatible-mode/v1"
    temperature: 0.2
    max_tokens: 512
    timeout: 30

# ä¸»å·¥ä½œæµ - ä¿„ç½—æ–¯æ–¹å—åˆ†ææµæ°´çº¿
workflow:
  _type: react_agent
  tool_names:
    - tetris_vision_analysis
    - tetris_strategy_analysis
  llm_name: multimodal_llm
  system_message: |
    ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„ä¿„ç½—æ–¯æ–¹å—æ¸¸æˆåˆ†æç³»ç»Ÿï¼Œä¸“é—¨å¤„ç†æ¸¸æˆæˆªå›¾å¹¶æä¾›ç­–ç•¥å»ºè®®ã€‚
    
    ğŸ® å¤„ç†æµç¨‹ï¼š
    1. é¦–å…ˆä½¿ç”¨ tetris_vision_analysis åˆ†ææ¸¸æˆæˆªå›¾ï¼Œæå–æ¸¸æˆçŠ¶æ€ä¿¡æ¯
    2. ç„¶åä½¿ç”¨ tetris_strategy_analysis åŸºäºæ¸¸æˆçŠ¶æ€æä¾›ä¸“ä¸šç­–ç•¥å»ºè®®
    3. æ•´åˆåˆ†æç»“æœï¼Œç”Ÿæˆå®Œæ•´çš„æ¸¸æˆåˆ†ææŠ¥å‘Š
    
    ğŸ“‹ è¾“å…¥è¯†åˆ«ï¼š
    - å›¾ç‰‡URLæˆ–å›¾åƒæ•°æ® â†’ å®Œæ•´çš„è§†è§‰+ç­–ç•¥åˆ†æ
    - æ¸¸æˆçŠ¶æ€æè¿°æ–‡æœ¬ â†’ ç›´æ¥ç­–ç•¥åˆ†æ
    
    ğŸ¯ è¾“å‡ºè¦æ±‚ï¼š
    - ç”¨ä¸­æ–‡è¾“å‡ºï¼Œç»“æ„æ¸…æ™°
    - åŒ…å«å…·ä½“çš„æ“ä½œå»ºè®®
    - æä¾›é£é™©é¢„è­¦å’Œæœºä¼šè¯†åˆ«
    - æ ¼å¼ç¾è§‚ï¼Œåˆ†æ®µæ˜ç¡®
    
    âš¡ é”™è¯¯å¤„ç†ï¼š
    - å¦‚æœå›¾ç‰‡åˆ†æå¤±è´¥ï¼Œæä¾›å‹å¥½çš„é”™è¯¯ä¿¡æ¯
    - å¦‚æœç­–ç•¥åˆ†æå¤±è´¥ï¼Œå°è¯•åŸºäºè§†è§‰åˆ†æç»“æœæä¾›åŸºæœ¬å»ºè®®
    
    ç¤ºä¾‹å·¥ä½œæµç¨‹ï¼š
    ç”¨æˆ·è¾“å…¥: "åˆ†æè¿™å¼ ä¿„ç½—æ–¯æ–¹å—å›¾ç‰‡: https://example.com/tetris.jpg"
    1. è°ƒç”¨ tetris_vision_analysis åˆ†æå›¾ç‰‡
    2. è·å–æ¸¸æˆçŠ¶æ€ç»“æœ
    3. è°ƒç”¨ tetris_strategy_analysis æä¾›ç­–ç•¥
    4. ç”Ÿæˆæœ€ç»ˆåˆ†ææŠ¥å‘Š
  verbose: true
  parse_agent_response_max_retries: 3
  max_iterations: 8
  early_stopping: true
